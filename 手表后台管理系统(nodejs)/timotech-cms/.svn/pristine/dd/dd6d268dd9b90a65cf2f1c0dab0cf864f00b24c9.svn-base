/**
 * Created by Administrator on 2015/9/17.
 */

var express = require('express');
var adminCtrl = require('./controllers/admin_controller');
var loginCtrl = require('./controllers/login_controller');
var deviceCtrl = require('./controllers/device_controller');
var auth = require('./middleware/auth');
var router = express.Router();

router.get('/login', loginCtrl.login);
router.get('/signout', auth.userRequired, loginCtrl.signout);
router.get('/index', auth.userRequired, adminCtrl.index);
router.get('/', auth.userRequired, adminCtrl.index);
router.get('/admin/user', auth.userRequired, adminCtrl.user);
router.get('/admin/updatepswd', auth.userRequired, adminCtrl.updatePswd);
router.get('/admin/organ', auth.userRequired, adminCtrl.organ);

router.get('/device/log', auth.userRequired, deviceCtrl.log);
router.get('/device/watch', auth.userRequired, deviceCtrl.watch);
router.get('/device/device', auth.userRequired, auth.adminRequired, deviceCtrl.device);
router.get('/device/exportLog', auth.userRequired, auth.adminRequired, deviceCtrl.exportLog);

router.post('/signin', loginCtrl.signIn);
router.post('/admin/getorganlist', auth.userRequired, adminCtrl.getOrganList);
router.post('/admin/saveorgan', auth.userRequired, auth.adminRequired, adminCtrl.saveOrgan);
router.post('/admin/getdisplayorganlist', auth.userRequired, adminCtrl.getDisplayOrganList);
router.post('/admin/getuserlist', auth.userRequired, adminCtrl.getUserList);
router.post('/admin/saveuser', auth.userRequired, auth.adminRequired, adminCtrl.saveUser);
router.post('/admin/resetpassword', auth.userRequired, auth.adminRequired, adminCtrl.resetPassword);
router.post('/admin/saveupdatepswd', auth.userRequired, adminCtrl.saveUpdatePswd);

router.post('/device/getloglist', auth.userRequired, auth.adminRequired, deviceCtrl.getLogList);
router.post('/device/sendCommand', auth.userRequired, auth.adminRequired, deviceCtrl.sendCommand);
router.post('/device/getdevicelist', auth.userRequired, deviceCtrl.getDeviceList);
router.post('/device/ubind', auth.userRequired, auth.adminRequired, deviceCtrl.unbind);

module.exports = router;
/**/